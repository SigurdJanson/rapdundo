@page "/counter"

@using RapdUnDo.IUndoCore
@inject IUndoableService Undo

<MudText Typo="Typo.h5">Counter</MudText>

<MudText>Current count: @currentCount</MudText>

<MudButton StartIcon="@Icons.Material.Filled.PlusOne" Variant=Variant.Filled Color="Color.Primary" OnClick="IncrementCount">Click me</MudButton>

@code {
    public int currentCount { get; set; } = 0;

    public PropertySetterUndoCommand<Counter, int> CmdCount;

    protected override void OnInitialized()
    {
        CmdCount = new(this, nameof(currentCount), currentCount + 1);
        Undo.Register(CmdCount); // new PropertySetterUndoCommand<Counter, int>(this, nameof(currentCount), currentCount + 1)
    }

    private void IncrementCount()
    {
        CmdCount.Execute();
    }

}

