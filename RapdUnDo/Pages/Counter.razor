@page "/counter"

@using RapdUnDo.IUndoCore
@inject ISnackbar Snackbar

<MudText Typo="Typo.h5">Counter</MudText>

<MudText>Current count: @InnerCounter.currentCount</MudText>

<MudButton StartIcon="@Icons.Material.Filled.PlusOne" Variant=Variant.Filled Color="Color.Primary" OnClick="IncrementCount">Click me</MudButton>

@code {
    public class CounterClass
    {
        public int currentCount { get; set; }  = 0;
    }

    public CounterClass InnerCounter = new();
    //public int currentCount = 0;

    private void IncrementCount()
    {
        //currentCount+=10;

        try
        {
            PropertySetterUnDoCommand<CounterClass, int> Cmd = new(InnerCounter, nameof(InnerCounter.currentCount), InnerCounter.currentCount + 1);
            Cmd.Execute();
        }
        catch (Exception e)
        {
            Snackbar.Add(e.Message);
        }

        //Task.Delay(2000);
        //Cmd.Revert();
    }
}
